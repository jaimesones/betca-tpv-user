"use strict";(self.webpackChunkbetca_tpv_angular=self.webpackChunkbetca_tpv_angular||[]).push([[488],{6488:(pe,k,c)=>{c.r(k),c.d(k,{HomeModule:()=>se});var D=c(2453),T=c(1659),S=c(9205),O=c(5965),t=c(3668),w=c(6167);let J=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:5,vars:0,consts:[["cols","1","rowHeight","4:1"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-grid-list",0),t.TgZ(1,"mat-grid-tile"),t._uU(2,"Welcome to TPV "),t.TgZ(3,"strong"),t._uU(4," -> News..."),t.qZA(),t.qZA(),t.qZA())},directives:[w.Il,w.DX],styles:[""]}),n})();var _=c(2997),s=c(5304),U=c(8502),Z=c(9925),g=c(6019),d=c(8167),C=c(4383),m=c(9133),h=c(86);function Y(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-form-field",2),t.TgZ(1,"mat-label"),t._uU(2,"Barcode"),t.qZA(),t.TgZ(3,"input",3),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().complaint.barcode=a}),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.complaint.barcode)}}function P(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().create()}),t._uU(1,"Create "),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",e.invalid())}}function H(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().update()}),t._uU(1,"Update "),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",e.invalid())}}let y=(()=>{class n{constructor(e,o,a,r){this.complaintService=o,this.dialog=a,this.authService=r,this.title=e?"Update Complaint":"Create Complaint",this.complaint=e||{barcode:void 0,description:void 0},this.oldId=e?e.id:void 0}isCreated(){return void 0===this.oldId}create(){this.complaintService.create(this.complaint).subscribe(()=>this.dialog.closeAll())}update(){this.complaintService.update(this.oldId,this.complaint).subscribe(()=>this.dialog.closeAll())}invalid(){return this.check(this.complaint.barcode)||this.check(this.complaint.description)}check(e){return void 0===e||""===e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.WI),t.Y36(U.o),t.Y36(s.uw),t.Y36(Z.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:13,vars:5,consts:[["mat-dialog-title",""],["class","full-width",4,"ngIf"],[1,"full-width"],["matInput","","required","","type","text",3,"ngModel","ngModelChange"],["cdkFocusInitial","","mat-dialog-close","","mat-raised-button",""],["color","primary","mat-raised-button","",3,"disabled","click",4,"ngIf"],["color","primary","mat-raised-button","",3,"disabled","click"]],template:function(e,o){1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content"),t.YNc(3,Y,4,1,"mat-form-field",1),t.TgZ(4,"mat-form-field",2),t.TgZ(5,"mat-label"),t._uU(6,"Description"),t.qZA(),t.TgZ(7,"input",3),t.NdJ("ngModelChange",function(r){return o.complaint.description=r}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"mat-dialog-actions"),t.TgZ(9,"button",4),t._uU(10,"Close"),t.qZA(),t.YNc(11,P,2,1,"button",5),t.YNc(12,H,2,1,"button",5),t.qZA()),2&e&&(t.xp6(1),t.Oqu(o.title),t.xp6(2),t.Q6J("ngIf",o.isCreated()),t.xp6(4),t.Q6J("ngModel",o.complaint.description),t.xp6(4),t.Q6J("ngIf",o.isCreated()),t.xp6(1),t.Q6J("ngIf",!o.isCreated()))},directives:[s.uh,s.xY,g.O5,d.KE,d.hX,C.Nt,m.Fj,m.Q7,m.JJ,m.On,s.H8,h.lW,s.ZT],styles:["mat-dialog-content[_ngcontent-%COMP%]{width:250px}.full-width[_ngcontent-%COMP%]{width:100%}"]}),n})();var f=c(9112);let Q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:9,vars:1,consts:[["mat-dialog-title",""],["color","warn"],["color","primary","mat-dialog-close","","mat-raised-button",""],["mat-raised-button","",3,"mat-dialog-close"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t.TgZ(1,"mat-icon",1),t._uU(2,"warning"),t.qZA(),t._uU(3," Dangerous operation. Are you sure?\n"),t.qZA(),t.TgZ(4,"mat-dialog-actions"),t.TgZ(5,"button",2),t._uU(6,"Cancel"),t.qZA(),t.TgZ(7,"button",3),t._uU(8,"Yes"),t.qZA(),t.qZA()),2&e&&(t.xp6(7),t.Q6J("mat-dialog-close",!0))},directives:[s.uh,f.Hw,s.H8,h.lW,s.ZT],styles:[".mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),n})();var N=c(6421),p=c(888),F=c(6674);let R=(()=>{class n{constructor(e,o){this.dialog=e,this.complaintService=o,this.title="Complaints management",this.complaints=(0,_.of)([])}create(){this.dialog.open(y).afterClosed().subscribe(()=>this.searchAll())}searchAll(){this.complaints=this.complaintService.searchAll()}read(e){this.dialog.open(N.Y,{data:{title:"Complaint Detail",object:this.complaintService.read(e.id)}})}update(e){this.complaintService.read(e.id).subscribe(o=>this.dialog.open(y,{data:o}))}delete(e){this.dialog.open(Q).afterClosed().subscribe(o=>o.this.searchAll())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.uw),t.Y36(U.o))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:8,vars:4,consts:[["mat-icon-button","",3,"click"],[3,"data","title","updateAction","readAction","create","delete","update","read"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-content"),t.TgZ(2,"button",0),t.NdJ("click",function(){return o.searchAll()}),t.TgZ(3,"span"),t._uU(4,"Search All"),t.qZA(),t.TgZ(5,"mat-icon"),t._uU(6,"search"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"app-crud",1),t.NdJ("create",function(){return o.create()})("delete",function(r){return o.delete(r)})("update",function(r){return o.update(r)})("read",function(r){return o.read(r)}),t.qZA()),2&e&&(t.xp6(7),t.Q6J("data",o.complaints)("title",o.title)("updateAction",!0)("readAction",!0))},directives:[p.a8,p.dn,h.lW,f.Hw,F.D],encapsulation:2}),n})();var L=c(4499),j=c(8100);const z=c(5724).z;var $=c(4753),G=c(7384),W=c(2835),v=c(4225),K=c(4),V=c(6590);let b=(()=>{class n{constructor(e,o){this.httpService=e,this.authService=o,this.amountSubject=new L.X(0),this.articleImages=["https://img.ruten.com.tw/s2/0/07/d8/22027800358872_988.jpg","https://obs.line-scdn.net/0hs74TRyDsLBgJLQQniPhTTzB7IGk6STkeZ1VnfS0vdCghSndINklrYikrd304TWtLNFdmLXh6dCknHG0ZYEs","https://pica.zhimg.com/v2-be29cd1802beb942b57eaa9f92865db0_720w.jpg?source=172ae18b","https://img.alicdn.com/bao/uploaded/i3/1716763143/O1CN01vClZei1Z5XNACttFJ_!!1716763143.jpg_500x500q90.jpg","https://cs-c.ecimg.tw/items/DICK8YA900AIZDI/000002_1644290607.jpg"],this.articleImageMap=new Map}addArticle(e){console.log("Article added to shopping basket: "+e.description)}getShoppingCartItems(){return this.getShoppingCart().pipe(z(e=>{if(e){const o=[];return e.shoppingItems.forEach(a=>{o.push(this.httpService.get(v.C.ARTICLES+"/"+a.barcode).pipe((0,$.U)(r=>{let u=null;return this.articleImageMap.has(r.barcode)?u=this.articleImageMap.get(r.barcode):(u=this.loadArticleImage(),this.articleImageMap.set(r.barcode,u)),Object.assign(Object.assign(Object.assign({},r),a),{image:u})})))}),o.length?(0,j.D)(o):(0,_.of)([])}return e}))}loadArticleImage(){let e=Math.floor(Math.random()*(this.articleImages.length-1));return this.articleImages[e]}getShoppingCart(){return this.authService.isAuthenticated()?this.httpService.get(v.C.SHOPPING_CART+"/"+this.authService.getMobile()).pipe((0,G.b)(e=>{this.amountSubject.next(e.shoppingItems.length),this.shoppingCart=e}),(0,W.K)(e=>(0,_.of)(null))):(0,_.of)(null)}deleteFromShoppingBasket(e){let o=[];for(let a of this.shoppingCart.shoppingItems)a.barcode!=e&&o.push(a);return this.shoppingCart.shoppingItems=o,this.httpService.post(v.C.SHOPPING_CART+"/",this.shoppingCart)}addIntoShoppingBasket(e,o){const a=new K.L(e.barcode,e.description,e.retailPrice);a.amount=o;let r=this.shoppingCart.shoppingItems;return r.push(a),this.shoppingCart.shoppingItems=r,this.httpService.post(v.C.SHOPPING_CART+"/",this.shoppingCart)}updateShoppingBasketAmount(e,o){let a=[];for(let r of this.shoppingCart.shoppingItems)r.barcode==e&&(r.amount+=o),0!=r.amount&&a.push(r);return this.shoppingCart.shoppingItems=a,this.httpService.post(v.C.SHOPPING_CART+"/",this.shoppingCart)}getAmountObserver(){return this.amountSubject.asObservable()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(V.O),t.LFG(Z.e))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function tt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().mobile=void 0}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA(),t.qZA()}}let M=(()=>{class n{constructor(e,o,a,r){this.auth=e,this.router=o,this.dialog=a,this.cartService=r}login(){this.auth.login(this.mobile,this.password).subscribe(()=>{this.auth.untilOperator()?this.router.navigate(["shop"]).then().finally(()=>this.dialog.closeAll()):(this.cartService.getShoppingCart().subscribe(),this.dialog.closeAll())})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.e),t.Y36(T.F0),t.Y36(s.uw),t.Y36(b))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:13,vars:3,consts:[["mat-dialog-title",""],["matInput","","placeholder","Mobile","type","text",3,"ngModel","ngModelChange"],["aria-label","Clear","cdkFocusInitial","","mat-button","","mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],["matInput","","placeholder","Password","type","password",3,"ngModel","ngModelChange"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"click"],["aria-label","Clear","cdkFocusInitial","","mat-button","","mat-icon-button","","matSuffix","",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1,"Login"),t.qZA(),t.TgZ(2,"mat-dialog-content"),t.TgZ(3,"mat-form-field"),t.TgZ(4,"input",1),t.NdJ("ngModelChange",function(r){return o.mobile=r}),t.qZA(),t.YNc(5,tt,3,0,"button",2),t.qZA(),t.TgZ(6,"mat-form-field"),t.TgZ(7,"input",3),t.NdJ("ngModelChange",function(r){return o.password=r}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"mat-dialog-actions"),t.TgZ(9,"button",4),t._uU(10,"Cancel"),t.qZA(),t.TgZ(11,"button",5),t.NdJ("click",function(){return o.login()}),t._uU(12,"Submit"),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngModel",o.mobile),t.xp6(1),t.Q6J("ngIf",o.mobile),t.xp6(2),t.Q6J("ngModel",o.password))},directives:[s.uh,s.xY,d.KE,C.Nt,m.Fj,m.JJ,m.On,g.O5,s.H8,h.lW,s.ZT,d.R9,f.Hw],styles:[".mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),n})();var et=c(8643),nt=c(4377),x=c(3530),ot=c(4148);function it(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().login()}),t.TgZ(1,"mat-icon"),t._uU(2,"person_outline"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Login"),t.qZA(),t.qZA()}}function at(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().logout()}),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.TgZ(3,"mat-icon"),t._uU(4,"person_outline"),t.qZA(),t.TgZ(5,"span"),t._uU(6,"Logout"),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.username)}}function rt(n,i){if(1&n&&(t.TgZ(0,"button",20),t.TgZ(1,"mat-icon"),t._uU(2,"account_box"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Profile"),t.qZA(),t.qZA()),2&n){t.oxw();const e=t.MAs(23);t.Q6J("matMenuTriggerFor",e)}}let ct=(()=>{class n{constructor(e,o,a,r){this.dialog=e,this.authService=o,this.shoppingBasketService=a,this.cd=r,this.title="TPV",this.username=void 0,this.subs=[]}ngOnInit(){this.subs.push(this.shoppingBasketService.getAmountObserver().subscribe(e=>this.num=e))}login(){this.dialog.open(M).afterClosed().subscribe(()=>this.username=this.authService.getName())}logout(){this.authService.logout()}cart(){}isAuthenticated(){return this.authService.isAuthenticated()}search(e){}ngAfterViewInit(){this.cd.detectChanges()}ngOnDestroy(){for(let e of this.subs)e&&!e.closed&&e.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.uw),t.Y36(Z.e),t.Y36(b),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:74,vars:5,consts:[["color","primary"],["appearance","fill","hideRequiredMarker","true"],["matInput","","placeholder","","required",""],["code",""],["mat-icon-button","",3,"click"],["alt","miw","src","../../assets/images/miw.png"],["mat-button","","routerLink","/home/adviser"],["mat-button","",3,"click",4,"ngIf"],["mat-button","",3,"matMenuTriggerFor",4,"ngIf"],["mat-button","","routerLink","/home/shopping-basket",3,"click"],["matBadgeColor","accent","matBadgeOverlap","false","matBadgeSize","medium",3,"matBadge"],["xPosition","before"],["profile","matMenu"],["mat-menu-item",""],["mat-menu-item","","routerLink","/home/reviews"],["mat-menu-item","","routerLink","/home/online-orders"],["mat-menu-item","","routerLink","/home/complaints"],["mat-menu-item","","routerLink","/home/customer-points"],["mat-menu-item","","routerLink","/home/technical-support"],[1,"center"],["mat-button","",3,"matMenuTriggerFor"],["adviser","matMenu"],["mat-button",""],["mat-button","",3,"click"]],template:function(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"mat-toolbar",0),t.TgZ(1,"div"),t.TgZ(2,"mat-form-field",1),t.TgZ(3,"mat-label"),t.TgZ(4,"small"),t._uU(5,"Description"),t.qZA(),t.qZA(),t._UZ(6,"input",2,3),t.qZA(),t.TgZ(8,"button",4),t.NdJ("click",function(){t.CHM(a);const u=t.MAs(7);return o.search(u.value)}),t.TgZ(9,"mat-icon"),t._uU(10,"pageview"),t.qZA(),t.qZA(),t.qZA(),t._UZ(11,"img",5),t.TgZ(12,"button",6),t.TgZ(13,"span"),t._uU(14,"TPV"),t.qZA(),t.qZA(),t.TgZ(15,"div"),t.YNc(16,it,5,0,"button",7),t.YNc(17,at,7,1,"button",7),t.YNc(18,rt,5,1,"button",8),t.TgZ(19,"button",9),t.NdJ("click",function(){return o.cart()}),t.TgZ(20,"mat-icon",10),t._uU(21,"shopping_cart "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"mat-menu",11,12),t.TgZ(24,"button",13),t.TgZ(25,"mat-icon"),t._uU(26,"settings"),t.qZA(),t.TgZ(27,"span"),t._uU(28,"Settings"),t.qZA(),t.qZA(),t.TgZ(29,"button",14),t.TgZ(30,"mat-icon"),t._uU(31,"grade"),t.qZA(),t.TgZ(32,"span"),t._uU(33,"Reviews"),t.qZA(),t.qZA(),t.TgZ(34,"button",15),t.TgZ(35,"mat-icon"),t._uU(36,"shopping_basket"),t.qZA(),t.TgZ(37,"span"),t._uU(38,"Online Orders"),t.qZA(),t.qZA(),t.TgZ(39,"button",13),t.TgZ(40,"mat-icon"),t._uU(41,"money_off"),t.qZA(),t.TgZ(42,"span"),t._uU(43,"Refunds"),t.qZA(),t.qZA(),t.TgZ(44,"button",16),t.TgZ(45,"mat-icon"),t._uU(46,"sentiment_very_dissatisfied"),t.qZA(),t.TgZ(47,"span"),t._uU(48,"Complaints"),t.qZA(),t.qZA(),t.TgZ(49,"button",17),t.TgZ(50,"mat-icon"),t._uU(51,"score"),t.qZA(),t.TgZ(52,"span"),t._uU(53,"Points"),t.qZA(),t.qZA(),t.TgZ(54,"button",18),t.TgZ(55,"mat-icon"),t._uU(56,"build"),t.qZA(),t.TgZ(57,"span"),t._uU(58,"Technical Support"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(59,"mat-toolbar",19),t.TgZ(60,"button",20),t._uU(61,"Adviser"),t.qZA(),t.TgZ(62,"mat-menu",null,21),t.TgZ(64,"button",13),t._uU(65,"Sale"),t.qZA(),t.TgZ(66,"button",13),t._uU(67,"Popular"),t.qZA(),t.TgZ(68,"button",13),t._uU(69,"New"),t.qZA(),t.qZA(),t.TgZ(70,"button",22),t._uU(71,"Top 5"),t.qZA(),t.qZA(),t._UZ(72,"router-outlet"),t._UZ(73,"app-footer")}if(2&e){const a=t.MAs(63);t.xp6(16),t.Q6J("ngIf",!o.isAuthenticated()),t.xp6(1),t.Q6J("ngIf",o.isAuthenticated()),t.xp6(1),t.Q6J("ngIf",o.isAuthenticated()),t.xp6(2),t.s9C("matBadge",o.num),t.xp6(40),t.Q6J("matMenuTriggerFor",a)}},directives:[et.Ye,d.KE,d.hX,C.Nt,h.lW,f.Hw,T.rH,g.O5,nt.k,x.VK,x.OP,x.p6,T.lC,ot.c],styles:[".mat-toolbar[_ngcontent-%COMP%]{justify-content:space-between}.center[_ngcontent-%COMP%]{justify-content:center}.mat-grid-tile[_ngcontent-%COMP%]{font-size:xx-large}"]}),n})();var l=c(9099);const lt=["matTable"];function st(n,i){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Image "),t.qZA())}function pt(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._UZ(1,"img",15),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.s9C("src",e.image,t.LSH)}}function mt(n,i){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Description "),t.qZA())}function ut(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.description," ")}}function dt(n,i){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Amount "),t.qZA())}function _t(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-cell"),t.TgZ(1,"button",16),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().onAmountChanged(r.barcode,1)}),t.TgZ(2,"mat-icon"),t._uU(3,"add_circle_outline"),t.qZA(),t.qZA(),t._uU(4),t.TgZ(5,"button",16),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().onAmountChanged(r.barcode,-1)}),t.TgZ(6,"mat-icon"),t._uU(7,"remove_circle_outline"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=i.$implicit;t.xp6(4),t.hij(" ",e.amount," ")}}function gt(n,i){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Total "),t.qZA())}function ht(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",(e.retailPrice*e.amount).toFixed(3).slice(0,-1)," ")}}function ft(n,i){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1," actions "),t.qZA())}function Zt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-cell"),t.TgZ(1,"button",17),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().delete(r)}),t.TgZ(2,"mat-icon",18),t._uU(3,"close"),t.qZA(),t.qZA(),t.qZA()}}function Ct(n,i){1&n&&t._UZ(0,"mat-header-row")}function Tt(n,i){1&n&&t._UZ(0,"mat-row")}function vt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw().login()}),t.TgZ(1,"mat-icon"),t._uU(2,"person_outline"),t.qZA(),t._uU(3," Sign In "),t.qZA()}}let bt=(()=>{class n{constructor(e,o,a){this.dialog=e,this.authService=o,this.shoppingBasketService=a,this.displayedColumns=["image","description","amount","total","actions"],this.username=void 0}ngOnInit(){this.synchronizeShoppingCart()}synchronizeShoppingCart(){this.shoppingBasketService.getShoppingCartItems().subscribe(e=>{this.shoppingItems=e},()=>{this.shoppingItems=[]})}totalPay(){let e=0;if(Symbol.iterator in Object(this.shoppingItems))for(let o of this.shoppingItems)e+=o.amount*o.retailPrice;return e}delete(e){this.shoppingBasketService.deleteFromShoppingBasket(e.barcode).subscribe(()=>{this.synchronizeShoppingCart()})}login(){this.dialog.open(M).afterClosed().subscribe(()=>this.username=this.authService.getName())}isAuthenticated(){return this.authService.isAuthenticated()}onAmountChanged(e,o){this.shoppingBasketService.updateShoppingBasketAmount(e,o).subscribe(()=>{this.synchronizeShoppingCart()})}pay(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.uw),t.Y36(Z.e),t.Y36(b))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(e,o){if(1&e&&t.Gf(lt,5),2&e){let a;t.iGM(a=t.CRH())&&(o.matTable=a.first)}},decls:44,vars:10,consts:[["color","primary"],[1,"mat-elevation-z8",3,"dataSource"],["matTable",""],["matColumnDef","image"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","description"],["matColumnDef","amount"],["matColumnDef","total"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"totalPrice"],["color","primary","mat-raised-button","",3,"click",4,"ngIf"],["color","accent","mat-raised-button","",3,"disabled","click"],["alt","",3,"src"],["color","accent","mat-icon-button","",3,"click"],["mat-icon-button","",3,"click"],["color","warn"],["color","primary","mat-raised-button","",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-title"),t.TgZ(2,"mat-icon",0),t._uU(3,"shopping_cart"),t.qZA(),t._uU(4," Shopping Basket "),t.qZA(),t.TgZ(5,"mat-card-content"),t.TgZ(6,"mat-table",1,2),t.ynx(8,3),t.YNc(9,st,2,0,"mat-header-cell",4),t.YNc(10,pt,2,1,"mat-cell",5),t.BQk(),t.ynx(11,6),t.YNc(12,mt,2,0,"mat-header-cell",4),t.YNc(13,ut,2,1,"mat-cell",5),t.BQk(),t.ynx(14,7),t.YNc(15,dt,2,0,"mat-header-cell",4),t.YNc(16,_t,8,1,"mat-cell",5),t.BQk(),t.ynx(17,8),t.YNc(18,gt,2,0,"mat-header-cell",4),t.YNc(19,ht,2,1,"mat-cell",5),t.BQk(),t.ynx(20,9),t.YNc(21,ft,2,0,"mat-header-cell",4),t.YNc(22,Zt,4,0,"mat-cell",5),t.BQk(),t.YNc(23,Ct,1,0,"mat-header-row",10),t.YNc(24,Tt,1,0,"mat-row",11),t.qZA(),t.qZA(),t.TgZ(25,"mat-card-content"),t.ynx(26,12),t.TgZ(27,"h2"),t._uU(28,"Total: "),t.TgZ(29,"span"),t._uU(30),t.ALo(31,"currency"),t.qZA(),t.qZA(),t.BQk(),t.qZA(),t.TgZ(32,"mat-card-content"),t.TgZ(33,"div"),t.YNc(34,vt,4,0,"button",13),t._uU(35,"\xa0 "),t.TgZ(36,"button",14),t.NdJ("click",function(){return o.pay()}),t.TgZ(37,"mat-icon"),t._uU(38,"credit_card"),t.qZA(),t._uU(39," Pay "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"mat-card-content"),t.ynx(41),t.TgZ(42,"h3"),t._uU(43," * The payment is in cash on delivery. "),t.qZA(),t.BQk(),t.qZA(),t.qZA()),2&e&&(t.xp6(6),t.Q6J("dataSource",o.shoppingItems),t.xp6(17),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(6),t.hij(" ",t.Dn7(31,6,o.totalPay(),"EUR","symbol")," "),t.xp6(4),t.Q6J("ngIf",!o.isAuthenticated()),t.xp6(2),t.Q6J("disabled",!o.isAuthenticated()))},directives:[p.a8,p.n5,f.Hw,p.dn,l.BZ,l.w1,l.fO,l.Dz,l.as,l.nj,g.O5,h.lW,l.ge,l.ev,l.XQ,l.Gk],pipes:[g.H9],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;max-height:600px;min-width:300px}.mat-cell[_ngcontent-%COMP%]{overflow:visible}.mat-table[_ngcontent-%COMP%]{overflow:auto;max-height:600px}.mat-column-[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}img[_ngcontent-%COMP%]{height:100px}img[_ngcontent-%COMP%]{height:72px;width:72px;margin-top:5px;margin-bottom:5px;object-fit:cover}.mat-header-cell-amount[_ngcontent-%COMP%]{justify-content:center}.mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:30px}span[_ngcontent-%COMP%]{float:right}div[_ngcontent-%COMP%]{float:right}"]}),n})();var A=c(7168);function At(n,i){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Reference "),t.qZA())}function St(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.reference," ")}}function xt(n,i){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1," State "),t.qZA())}function qt(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const e=i.$implicit,o=t.oxw();t.xp6(1),t.hij(" ",o.OnlineOrderState[e.state],"")}}function kt(n,i){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Delivery Date "),t.qZA())}function Ot(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.deliveryDate,"medium")," ")}}function wt(n,i){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Ticket Reference"),t.qZA())}function Ut(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.ticket.reference,"")}}function yt(n,i){1&n&&t._UZ(0,"mat-header-row")}function Nt(n,i){1&n&&t._UZ(0,"mat-row")}let Mt=(()=>{class n{constructor(){this.OnlineOrderState=A.b,this.displayedColumns=["reference","state","deliveryDate","ticket"],this.onlineOrder1={reference:"680001",state:A.b.DELIVERED,deliveryDate:new Date("2020-01-01"),ticket:{id:"0001",reference:"888880001",mobile:688930112}},this.onlineOrder2={reference:"680002",state:A.b.SENT,deliveryDate:new Date("2020-02-28"),ticket:{id:"0002",reference:"888880002",mobile:688631677}},this.onlineOrder3={reference:"680003",state:A.b.PREPARING,deliveryDate:new Date("2020-04-01"),ticket:{id:"0003",reference:"888880003",mobile:688987646}},this.onlineOrders=[this.onlineOrder1,this.onlineOrder2,this.onlineOrder3]}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-online-orders"]],decls:21,vars:3,consts:[["color","primary"],[1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","reference"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","state"],["matColumnDef","deliveryDate"],["matColumnDef","ticket"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-title"),t.TgZ(2,"mat-icon",0),t._uU(3,"shopping_basket"),t.qZA(),t._uU(4," Online Orders "),t.qZA(),t.TgZ(5,"mat-card-content"),t.TgZ(6,"mat-table",1),t.ynx(7,2),t.YNc(8,At,2,0,"mat-header-cell",3),t.YNc(9,St,2,1,"mat-cell",4),t.BQk(),t.ynx(10,5),t.YNc(11,xt,2,0,"mat-header-cell",3),t.YNc(12,qt,2,1,"mat-cell",4),t.BQk(),t.ynx(13,6),t.YNc(14,kt,2,0,"mat-header-cell",3),t.YNc(15,Ot,3,4,"mat-cell",4),t.BQk(),t.ynx(16,7),t.YNc(17,wt,2,0,"mat-header-cell",3),t.YNc(18,Ut,2,1,"mat-cell",4),t.BQk(),t.YNc(19,yt,1,0,"mat-header-row",8),t.YNc(20,Nt,1,0,"mat-row",9),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(6),t.Q6J("dataSource",o.onlineOrders),t.xp6(13),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns))},directives:[p.a8,p.n5,f.Hw,p.dn,l.BZ,l.w1,l.fO,l.Dz,l.as,l.nj,l.ge,l.ev,l.XQ,l.Gk],pipes:[g.uU],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;max-height:500px;min-width:300px}.mat-cell[_ngcontent-%COMP%]{overflow:visible}.mat-table[_ngcontent-%COMP%]{overflow:auto;max-height:600px}.mat-column-[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),n})();var I=c(2118),q=c(1778);function It(n,i){if(1&n&&(t.TgZ(0,"h3",6),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.request.request)}}function Bt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"input",9),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).request.request=a}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("ngModel",e.request.request)}}function Et(n,i){if(1&n&&(t.TgZ(0,"mat-form-field",7),t.TgZ(1,"mat-label"),t._uU(2,"Text request"),t.qZA(),t.YNc(3,Bt,1,1,"input",8),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",e.isCreate())}}function Dt(n,i){if(1&n&&(t.TgZ(0,"div",12),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.gL8(" [",e.dateSent.toLocaleString().split(",")[2],"/",2==(null==e.dateSent.toLocaleString().split(",")[1]?null:e.dateSent.toLocaleString().split(",")[1].length)?e.dateSent.toLocaleString().split(",")[1]:"0"+e.dateSent.toLocaleString().split(",")[1],"/",e.dateSent.toLocaleString().split(",")[0],"] [",e.dateSent.toLocaleString().split(",")[3],":",2==(null==e.dateSent.toLocaleString().split(",")[4]?null:e.dateSent.toLocaleString().split(",")[4].length)?e.dateSent.toLocaleString().split(",")[4]:"0"+e.dateSent.toLocaleString().split(",")[4],"] : ",e.answer," ")}}function Jt(n,i){if(1&n&&(t.TgZ(0,"cdk-virtual-scroll-viewport",10),t.YNc(1,Dt,2,6,"div",11),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("cdkVirtualForOf",e.request.answers)}}function Yt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){return t.CHM(e),t.oxw().create()}),t._uU(1,"Create "),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",e.request.resolved)}}let B=(()=>{class n{constructor(e,o,a){this.technicalSupportService=o,this.dialog=a,this.title="Request",this.request=e||{identifier:void 0,request:void 0,answers:void 0,resolved:void 0},this.oldIdentifier=e?e.identifier:void 0,this.newAnswer=""}create(){this.request.resolved=!1,this.technicalSupportService.create(this.request).subscribe(()=>this.dialog.closeAll())}isCreate(){return void 0===this.oldIdentifier}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.WI),t.Y36(I.K),t.Y36(s.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-technical-support-creation-updating-dialog"]],decls:10,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-title","","id","request-header",4,"ngIf"],["class","full-width",4,"ngIf"],["class","viewport","itemSize","10",4,"ngIf"],["cdkFocusInitial","","mat-dialog-close","","mat-raised-button",""],["color","primary","mat-raised-button","",3,"disabled","click",4,"ngIf"],["mat-dialog-title","","id","request-header"],[1,"full-width"],["id","company","matInput","","required","","type","text",3,"ngModel","ngModelChange",4,"ngIf"],["id","company","matInput","","required","","type","text",3,"ngModel","ngModelChange"],["itemSize","10",1,"viewport"],["class","item",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"item"],["color","primary","mat-raised-button","",3,"disabled","click"]],template:function(e,o){1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.YNc(2,It,2,1,"h3",1),t.TgZ(3,"mat-dialog-content"),t.YNc(4,Et,4,1,"mat-form-field",2),t.qZA(),t.YNc(5,Jt,2,1,"cdk-virtual-scroll-viewport",3),t.TgZ(6,"mat-dialog-actions"),t.TgZ(7,"button",4),t._uU(8,"Close"),t.qZA(),t.YNc(9,Yt,2,1,"button",5),t.qZA()),2&e&&(t.xp6(1),t.Oqu(o.title),t.xp6(1),t.Q6J("ngIf",!o.isCreate()),t.xp6(2),t.Q6J("ngIf",o.isCreate()),t.xp6(1),t.Q6J("ngIf",o.request.answers),t.xp6(4),t.Q6J("ngIf",o.isCreate()))},directives:[s.uh,g.O5,s.xY,s.H8,h.lW,s.ZT,d.KE,d.hX,C.Nt,m.Fj,m.Q7,m.JJ,m.On,q.N7,q.xd,q.x0],styles:["#request-header[_ngcontent-%COMP%]{color:#daa520}.mat-success[_ngcontent-%COMP%]{background-color:green;color:#fff}.viewport[_ngcontent-%COMP%]{height:400px;width:auto}.item[_ngcontent-%COMP%]{height:auto;max-width:300px}h3[_ngcontent-%COMP%]{width:400px}"]}),n})();var Pt=c(2262);function Ht(n,i){1&n&&t._UZ(0,"mat-header-row")}function Qt(n,i){1&n&&t._UZ(0,"mat-row")}function Ft(n,i){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Identifier "),t.qZA())}function Rt(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.identifier," ")}}function Lt(n,i){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Request "),t.qZA())}function jt(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.request," ")}}function Xt(n,i){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Resolved "),t.qZA())}function zt(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.resolved," ")}}function $t(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-header-cell"),t.TgZ(1,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().create()}),t.TgZ(2,"mat-icon",13),t._uU(3,"add"),t.qZA(),t.qZA(),t.qZA()}}function Gt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-cell"),t.TgZ(1,"button",12),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().update(r)}),t.TgZ(2,"mat-icon",13),t._uU(3,"visibility"),t.qZA(),t.qZA(),t.qZA()}}let Wt=(()=>{class n{constructor(e,o){this.dialog=e,this.technicalSupportService=o,this.requests=(0,_.of)([]),this.title="Technical support management",this.columnsHeader=["identifier","request","resolved","actions"],this.resetSearch()}search(){this.requests=this.technicalSupportService.search(this.technicalSupportSearch)}resetSearch(){this.technicalSupportSearch={}}create(){this.dialog.open(B)}read(e){this.dialog.open(N.Y,{data:{title:"Technical Request details",object:this.technicalSupportService.read(e.identifier)}})}update(e){this.technicalSupportService.read(e.identifier).subscribe(o=>this.dialog.open(B,{data:o}))}ngOnInit(){this.requests=this.technicalSupportService.search(this.technicalSupportSearch)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.uw),t.Y36(I.K))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-technical-support"]],decls:35,vars:5,consts:[["matInput","",3,"ngModel","ngModelChange"],["mat-icon-button","",3,"click"],["matSort","",1,"mat-elevation-z8",3,"dataSource"],["table",""],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["matColumnDef","identifier"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","request"],["matColumnDef","resolved"],["matColumnDef","actions"],["mat-button","","mat-icon-button","","matSuffix","",3,"click"],["color","warn"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-content"),t.TgZ(2,"mat-label"),t.TgZ(3,"strong"),t._uU(4,"Filters: "),t.qZA(),t.qZA(),t.TgZ(5,"mat-form-field"),t.TgZ(6,"mat-label"),t._uU(7,"Request Text"),t.qZA(),t.TgZ(8,"input",0),t.NdJ("ngModelChange",function(r){return o.technicalSupportSearch.request=r}),t.qZA(),t.qZA(),t.TgZ(9,"button",1),t.NdJ("click",function(){return o.search()}),t.TgZ(10,"mat-icon"),t._uU(11,"search"),t.qZA(),t.qZA(),t.TgZ(12,"button",1),t.NdJ("click",function(){return o.resetSearch()}),t.TgZ(13,"mat-icon"),t._uU(14,"close"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"mat-card"),t.TgZ(16,"mat-card-title"),t._uU(17),t.qZA(),t.TgZ(18,"mat-card-content"),t.TgZ(19,"mat-table",2,3),t.YNc(21,Ht,1,0,"mat-header-row",4),t.YNc(22,Qt,1,0,"mat-row",5),t.ynx(23,6),t.YNc(24,Ft,2,0,"mat-header-cell",7),t.YNc(25,Rt,2,1,"mat-cell",8),t.BQk(),t.ynx(26,9),t.YNc(27,Lt,2,0,"mat-header-cell",7),t.YNc(28,jt,2,1,"mat-cell",8),t.BQk(),t.ynx(29,10),t.YNc(30,Xt,2,0,"mat-header-cell",7),t.YNc(31,zt,2,1,"mat-cell",8),t.BQk(),t.ynx(32,11),t.YNc(33,$t,4,0,"mat-header-cell",7),t.YNc(34,Gt,4,0,"mat-cell",8),t.BQk(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(8),t.Q6J("ngModel",o.technicalSupportSearch.request),t.xp6(9),t.Oqu(o.title),t.xp6(2),t.Q6J("dataSource",o.requests),t.xp6(2),t.Q6J("matHeaderRowDef",o.columnsHeader),t.xp6(1),t.Q6J("matRowDefColumns",o.columnsHeader))},directives:[p.a8,p.dn,d.hX,d.KE,C.Nt,m.Fj,m.JJ,m.On,h.lW,f.Hw,p.n5,l.BZ,Pt.YE,l.as,l.nj,l.w1,l.fO,l.Dz,l.XQ,l.Gk,l.ge,l.ev,d.R9],styles:["mat-table[_ngcontent-%COMP%]{width:100%}"]}),n})();var Kt=c(7594);let Vt=(()=>{class n{constructor(e,o){this.authService=e,this.customerPointsService=o}read(){this.customerPointsService.read().subscribe(e=>{this.customerPoints=e})}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.e),t.Y36(Kt.f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-customer-points"]],decls:12,vars:2,template:function(e,o){if(1&e&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-title"),t._uU(2," Customer Points "),t.qZA(),t.TgZ(3,"mat-card-content"),t.TgZ(4,"p"),t.TgZ(5,"strong"),t._uU(6,"Points: "),t.qZA(),t._uU(7),t.qZA(),t.TgZ(8,"p"),t.TgZ(9,"strong"),t._uU(10,"Last Update:"),t.qZA(),t._uU(11),t.qZA(),t.qZA(),t.qZA()),2&e){let a;t.xp6(7),t.Oqu(null!==(a=null==o.customerPoints?null:o.customerPoints.value)&&void 0!==a?a:0),t.xp6(4),t.Oqu(null==o.customerPoints?null:o.customerPoints.lastDate)}},directives:[p.a8,p.n5,p.dn],styles:[""]}),n})();var E=c(9966);let te=(()=>{class n{constructor(e,o){this.authService=e,this.snackBar=o,this.user={mobile:this.authService.getMobile(),name:this.authService.getName(),role:S.u.CUSTOMER,token:this.authService.getToken()},this.article={barcode:"#00000001",description:"1",retailPrice:1},this.reviews=[{user:this.user,article:{barcode:"#00000001",description:"1",retailPrice:1},score:2.5,opinion:"OK"},{user:this.user,article:{barcode:"#00000002",description:"2",retailPrice:2},score:5,opinion:"NO"},{user:this.user,article:{barcode:"#00000003",description:"3",retailPrice:3},score:.5,opinion:"Bad"},{user:this.user,article:{barcode:"#00000004",description:"4",retailPrice:4}},{user:this.user,article:{barcode:"#00000005",description:"5",retailPrice:5}},{user:this.user,article:{barcode:"#00000006",description:"6",retailPrice:6}},{user:this.user,article:{barcode:"#00000011",description:"7",retailPrice:7}}]}evaluate(e){return this.snackBar.open("Review created successfully","",{duration:2e3}),(0,_.of)(e)}modify(e){return this.snackBar.open("Review updated successfully","",{duration:2e3}),(0,_.of)(e)}searchAll(){return(0,_.of)(this.reviews)}searchIfExists(e){return(0,_.of)(null!=e.opinion)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Z.e),t.LFG(E.ux))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ee=(()=>{class n{constructor(){this.clickEvt=new t.vpe,this.mouseoverEvt=new t.vpe,this.mouseoutEvt=new t.vpe}onClick(e){this.clickEvt.emit({id:this.id,event:e})}onMouseOver(e){this.mouseoverEvt.emit({id:this.id,event:e})}onMouseOut(){this.mouseoutEvt.emit()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-icon-button"]],inputs:{id:"id",iconName:"iconName"},outputs:{clickEvt:"clickEvt",mouseoverEvt:"mouseoverEvt",mouseoutEvt:"mouseoutEvt"},decls:3,vars:1,consts:[["mat-icon-button","",3,"click","mouseover","mouseout"]],template:function(e,o){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(r){return o.onClick(r)})("mouseover",function(r){return o.onMouseOver(r)})("mouseout",function(){return o.onMouseOut()}),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Oqu(o.iconName))},directives:[h.lW,f.Hw],encapsulation:2}),n})(),ne=(()=>{class n{constructor(){this.scoreChange=new t.vpe,this.ICON_WIDTH=20,this.NUMBER_ICONS=5,this.iconNames=[]}ngOnInit(){this.fillStars(this.score)}fillStars(e){let o=e;void 0===o&&(o=0);for(let a=0;a<this.NUMBER_ICONS;a++)a+.5<o&&(this.iconNames[a]="star"),a+.5===o&&(this.iconNames[a]="star_half"),a+.5>o&&(this.iconNames[a]="star_border")}fillStarsOnHover(e){this.fillStars(this.getScoreFromStars(e))}fillStarsOnOut(){this.fillStars(this.score)}fillStarsOnClick(e){this.score=this.getScoreFromStars(e),this.scoreChange.emit(this.score),this.fillStars(this.score)}getScoreFromStars(e){const o=e.id;return Math.sign(e.event.offsetX-this.ICON_WIDTH/2)>=0?Number.parseInt(o,10)+1:Number.parseInt(o,10)+.5}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-score-bar"]],inputs:{score:"score"},outputs:{scoreChange:"scoreChange"},decls:6,vars:5,consts:[["id","0",3,"iconName","clickEvt","mouseoverEvt","mouseoutEvt"],["id","1",3,"iconName","clickEvt","mouseoverEvt","mouseoutEvt"],["id","2",3,"iconName","clickEvt","mouseoverEvt","mouseoutEvt"],["id","3",3,"iconName","clickEvt","mouseoverEvt","mouseoutEvt"],["id","4",3,"iconName","clickEvt","mouseoverEvt","mouseoutEvt"]],template:function(e,o){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"app-icon-button",0),t.NdJ("clickEvt",function(r){return o.fillStarsOnClick(r)})("mouseoverEvt",function(r){return o.fillStarsOnHover(r)})("mouseoutEvt",function(){return o.fillStarsOnOut()}),t.qZA(),t.TgZ(2,"app-icon-button",1),t.NdJ("clickEvt",function(r){return o.fillStarsOnClick(r)})("mouseoverEvt",function(r){return o.fillStarsOnHover(r)})("mouseoutEvt",function(){return o.fillStarsOnOut()}),t.qZA(),t.TgZ(3,"app-icon-button",2),t.NdJ("clickEvt",function(r){return o.fillStarsOnClick(r)})("mouseoverEvt",function(r){return o.fillStarsOnHover(r)})("mouseoutEvt",function(){return o.fillStarsOnOut()}),t.qZA(),t.TgZ(4,"app-icon-button",3),t.NdJ("clickEvt",function(r){return o.fillStarsOnClick(r)})("mouseoverEvt",function(r){return o.fillStarsOnHover(r)})("mouseoutEvt",function(){return o.fillStarsOnOut()}),t.qZA(),t.TgZ(5,"app-icon-button",4),t.NdJ("clickEvt",function(r){return o.fillStarsOnClick(r)})("mouseoverEvt",function(r){return o.fillStarsOnHover(r)})("mouseoutEvt",function(){return o.fillStarsOnOut()}),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("iconName",o.iconNames[0]),t.xp6(1),t.Q6J("iconName",o.iconNames[1]),t.xp6(1),t.Q6J("iconName",o.iconNames[2]),t.xp6(1),t.Q6J("iconName",o.iconNames[3]),t.xp6(1),t.Q6J("iconName",o.iconNames[4]))},directives:[ee],encapsulation:2}),n})();function oe(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit;return t.oxw().evaluate(a)}),t._uU(1,"Evaluate"),t.qZA()}}function ie(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit;return t.oxw().modify(a)}),t._uU(1,"Modify"),t.qZA()}}function ae(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-card",2),t.TgZ(1,"mat-card-header"),t.TgZ(2,"mat-card-title"),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"mat-card-content",3),t.TgZ(5,"textarea",4),t.NdJ("ngModelChange",function(a){return t.CHM(e).$implicit.opinion=a}),t.qZA(),t.qZA(),t.TgZ(6,"mat-card-actions",5),t.TgZ(7,"app-score-bar",6),t.NdJ("scoreChange",function(a){return t.CHM(e).$implicit.score=a}),t.qZA(),t.TgZ(8,"div",7),t.YNc(9,oe,2,0,"button",8),t.ALo(10,"async"),t.YNc(11,ie,2,0,"button",8),t.ALo(12,"async"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=i.$implicit,o=t.oxw();t.xp6(3),t.hij("Barcode: ",e.article.barcode,""),t.xp6(2),t.Q6J("ngModel",e.opinion),t.xp6(2),t.Q6J("score",e.score),t.xp6(2),t.Q6J("ngIf",!t.lcZ(10,5,o.searchIfExists(e))),t.xp6(2),t.Q6J("ngIf",t.lcZ(12,7,o.searchIfExists(e)))}}const ce=[{path:"",component:ct,children:[{path:"adviser",component:J},{path:"complaints",component:R,canActivate:[O.k],data:{roles:[S.u.CUSTOMER]}},{path:"shopping-basket",component:bt,canActivate:[O.k],data:{roles:[S.u.CUSTOMER]}},{path:"online-orders",component:Mt},{path:"technical-support",component:Wt},{path:"customer-points",component:Vt},{path:"reviews",component:(()=>{class n{constructor(e,o){this.reviewsService=e,this.snackBar=o}evaluate(e){void 0===e.score||0===e.score?this.snackBar.open("Please, insert a score before saving the review.","",{duration:3e3}):this.reviewsService.evaluate(e)}modify(e){this.reviewsService.modify(e)}searchAll(){return this.reviewsService.searchAll()}searchIfExists(e){return this.reviewsService.searchIfExists(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(te),t.Y36(E.ux))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-reviews"]],decls:3,vars:3,consts:[[1,"flex-container"],["class","card-container",4,"ngFor","ngForOf"],[1,"card-container"],[1,"opinion"],["matInput","","placeholder","Ex. It makes me feel...",3,"ngModel","ngModelChange"],[1,"score"],[3,"score","scoreChange"],[1,"updata-button"],["mat-stroked-button","",3,"click",4,"ngIf"],["mat-stroked-button","",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"main",0),t.YNc(1,ae,13,9,"mat-card",1),t.ALo(2,"async"),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.searchAll())))},directives:[g.sg,p.a8,p.dk,p.n5,p.dn,C.Nt,m.Fj,m.JJ,m.On,p.hq,ne,g.O5,h.lW],pipes:[g.Ov],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.card-container[_ngcontent-%COMP%]{margin:5px}.updata-button[_ngcontent-%COMP%]{text-align:right}.opinion[_ngcontent-%COMP%]{margin-left:50px;margin-top:10px}.score[_ngcontent-%COMP%]{text-align:center}"]}),n})()}]}];let le=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[T.Bz.forChild(ce)],T.Bz]}),n})(),se=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[b],imports:[[le,D.m]]}),n})()}}]);